<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4파르타</title>
    <!-- JQuary -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!--CSS 부트스트랩 땡겨오기 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">;
    <!-- CSS -->

    <style>
        /* 폰트 수정필요 */
        @import url('https://fonts.googleapis.com/css2?family=Cute+Font&display=swap');

        * {
            font-family: "Cute Font", sans-serif;
        }

        .main {
            color: white;
            background-image: url(https://occ-0-1123-1217.1.nflxso.net/dnm/api/v6/6AYY37jfdO6hpXcMjf9Yu5cnmO0/AAAABeIfo7VL_VDyKnljV66IkR-4XLb6xpZqhpLSo3JUtbivnEW4s60PD27muH1mdaANM_8rGpgbm6L2oDgA_iELHZLZ2IQjG5lvp5d2.jpg?r=e6e.jpg);
            background-position: center;
            background-size: cover;
        }

        .mycards {
            width: 1200px;
            margin: 20px auto 20px auto;
        }

        .mypostingbox {
            width: 500px;
            margin: 20px auto 20px auto;

            border: 1px solid white;
            padding: 5px;
            border-radius: 5px;
        }

        /* 버튼 css */
        .memberbtn {
            margin-right: 40px;
            margin-bottom: 40px;
        }

        .memberbtn>button {
            background: none;
            border: none;
            padding: 0;
            opacity: none;
        }



        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1050;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 팝업 css */
        .wr-card {
            background-color: white;
            width: 800px;
            height: 750px;

            margin: 50px auto 50px auto;
            padding: 30px;
            border: 2px solid yellowgreen;
            border-radius: 5px;

        }

        .write-down {
            flex-direction: row;
            display: flex;
            margin-top: 30px;
            padding-left: 50px;
        }

        .write-down>label {
            width: 100px;
            height: 35px;

            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }

        .write-down>input {
            height: 35px;
            width: 300px;

            border: none;
            outline: none;
            border-bottom: 2px solid #BFB9B6;

        }

        .write-down>textarea {
            width: 300px;
            height: 200px;

            border: 1px solid #BFB9B6;
            outline: 1px solid #BFB9B6;
            border-radius: 5px;
        }

        .etcbtn>button {
            background: none;
            border: none;
            padding: 0;
        }

        .write-down>select {
            width: 300px;

            border: 2px solid #BFB9B6;
            border-radius: 5px;
            padding: 5px;
        }
    </style>
    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDyD9wb7FVWS4lk-xe6jVjbLeIWZRNGoZY",
            authDomain: "p1teamhomepage.firebaseapp.com",
            projectId: "p1teamhomepage",
            storageBucket: "p1teamhomepage.appspot.com",
            messagingSenderId: "1064610336155",
            appId: "1:1064610336155:web:ef624e019c8ce49bae653e",
            measurementId: "G-5V9LYC2QW3"
        };
        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);



        $(document).ready(function () {
            /*추가버튼 팝업 열기*/
            $('.pop_btn').click(function (event) {
                event.preventDefault();
                var targetID = $(this).attr('href');
                $(targetID).fadeIn();
            });


            /*팝업 취소 버튼 팝업 닫기*/
            $('.cancel_btn').click(function () {
                $('#wr_popup').fadeOut();
            });
        });

        // 추가하기 버튼 누르면 Firebase에 저장
        $("#postingbtn").click(async function () {
            let image = $('#image').val();
            let surname = $('#surname').val();
            let firstname = $('#firstname').val();
            let mbti = $('#mbti').val();
            let comment = $('#comment').val();
            let email = $('#email').val();
            let blog = $('#blog').val();

            if (image.length = 0) {
                alert('이미지URL을 입력해주세요.');
            } else if (surname.length = 0) {
                alert('성을 입력해주세요.');
            } else if (firstname.length = 0) {
                alert('이름을 입력해주세요.');
            } else if (mbti.length = 0) {
                alert('MBTI를 선택해주세요.');
            } else if (comment.length = 0) {
                alert('각오를 입력해주세요.');
            } else if (email.length = 0) {
                alert('이메일을 입력해주세요.');
            } else if (blog.length = 0) {
                alert('블로그주소를 입력해주세요.');
            } else {
                let doc = {
                    'image': image,
                    'surname': surname,
                    'firstname': firstname,
                    'mbti': mbti,
                    'comment': comment,
                    'blog': blog,
                    'email': email
                };
                await addDoc(collection(db, "members"), doc); /*member에 저장*/
                alert('저장되었습니다.');   
                window.location.reload(); /*새로고침*/
            }

        })


        // Firebase에 저장된 값들 카드로 띄우기
        let docs = await getDocs(collection(db, "members"));
        docs.forEach((doc) => {
            let row = doc.data();

            let image = row['image'];
            let surname = row['surname'];
            let firstname = row['firstname'];
            let mbti = row['mbti'];
            let email = row['email'];

            let new_card = `
            <div class="col">
                <div class="card h-100">
                    <img src="${image}" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">이름 : ${surname}${firstname}</h5>
                        <p class="card-text">MBTI : ${mbti}</p>
                        <p class="card-text">이메일 : ${email}</p>
                    </div>
                </div>
            </div>`;
            $('#card').append(new_card);
        });
    </script>


</head>

<body>
    <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
            <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                <use xlink:href="#bootstrap"></use>
            </svg>
        </a>
        <!-- 상단 바 -->
        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
            <li><a href="#" class="nav-link px-2 text-danger">saparta</a></li>
            <li><a href="#" class="nav-link px-2 text-white">홈</a></li>
        </ul>
    </div>

    <!-- 메인타이틀과 팀 소개글 -->
    <div class="main">
        <div class="container-fluid py-5">
            <h1 class="display-5 fw-bold">4파르타</h1>
            <p class="col-md-8 fs-4">병든 팀장을 둘러싸고 흉흉한 소문이 떠돈다. 어둠에 뒤덮인 4조, 기이한 역병에 신음하는 팀원. 정체 모를 악에 맞서 팀플을 구원할 희망은
                오직 OO뿐이다.</p>
        </div>
    </div>

    <!-- 팀원 카드 -->
    <div class="mycards">
        <div id="card" class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col">
                <div class="card h-100">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARYAAAC1CAMAAACtbCCJAAAAk1BMVEWstbqrtro2OTmvuL2st72lrbEwMjEpLjBKT1I4OTt/hYqosLWrtrywu8FBREiwub0vMzWVnaBZYGMyNzp6gIOepao3OTdCSUwzNDYyNDRrcHMtMTEyNjo2ODxSWVxgZGeDjY9xeXskKi41PD+OlZmDi41aXF58g4Zjam8zNzRLS02aoKMvLjKfqatfYGJSW10nJyeZu8bwAAAFrklEQVR4nO3Zi3LaOBQGYEvyBWHZkjHYMiYQalNogLbv/3R7JIMh3cx0ptuZhOz/NZOCEW30R5djEQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI9IiLevirdfeGhpmvq/NT3Sr14Rr64onS4Wr1owxkKtF/1u1xepT0YN79PpzWMGJqaJ+ZIypcJtYpLtfa/FzrTJLLs+VWdDirsGjOl02RnTtvRCPU+HWETkrnl0PekfMhcxNfJLRLEEk5KXq8XdS2nOOS9vLZeGnm7ue6n70kopqRmXVTwRLhZRnKzk1VX8qLE0PKFYgmBC3TPzWydEn/CKl9F4IaenvIvuWkwTLsuW5zlvLG93Ppa0kzy28unCFA8aS1wlkaIJMaHf+9MLC/36wFigv/qBkF4bFtaNCur8sIAoxQpDCUx2iyhaFPt1PTSbt9xuFzfv0qv/jGKh0RJeYpGmH9YSFYjziWK6i+Vgm83GyO9CMddACTYpZbxkOvQvi2FYidk3OdHsPbryN/0Si90I5nsdiK2V9m60pHll+mcjbeQbBCzYJbKc3RIYJktWf7ObTxbLCy2g0TWWjjJajbGIvq0SFZW8mQrXgHahr7QWReGQgCL+QZa7WN6nL3/RfSzNNL8uuor1iaz79hILU2Jjm3UWrG05yfysYZGRq6UPYIhkGENZXjWbcVN/2FFzH0u7mxs5rJxMr22zLZJrLGGU83ga6r3fzv2l3sikHx4ypsLLUk2x8E0WXmjGHjOZ+1jMNHJddcOFnY00x1ss+jnhbaTYopRm74eIprUn8QkJHUS05USuzqVYOF8fi9GniEXPmmFl0HPbTHRhrrEEG5o9mvagSSPrIZallXnKXE23nOS0Wuez6BILT9rB6ZSc37V3f+w+lnia0cJqfBC5jPfZbbRENErmwu9PfHV0V/TG2gnlFU1Mwz37leaMj6Wxq5WlP7Ixn6BuoSDSunKThPYd3qVijEXsTjJZuP3pSNvPVoyxKBV1DY9jU1L9311iyWc36e9+gI/p9WgJ9bbheRZkM97QZLrFsn6SNd0v05SpeVn71edg5UsQKr0sZ9NjlO5iWfpY3E6kL7LsN//9R3Ufi51m7Cx5W4izrOh7OG7QUSLN1vVSZK7KK0LF9NbIzq0t0TkTQumdlathtDR018289+7cn3tdt2RMz6w8ZPuY08I6xiLmhjq79L5TLEvagRnt1cl57Ll+Pl1GC1/NPls5lzHRu0Gw5mYvbrFkdPdDNwa2Ie4koU5VyAoaQc//l1iUyKl4pXWV4rjGIhbJk7SXoyVLubQ93QCknSx/jGvHLRb5GWNhem66sqPqRV1iCVW2bSt7mA/2W1OZJd1Q6kPjaj+q/GnIKLdXUSx0T1TZzaMutDf/iiVITVVVyZGNoyXMal51UTbQmvbiLqUsjkaWptCBCqn0F7TkljRKsh8Nr9lY/Yfhe3fwz/xrElFVTwXZJriL5dg82RmVuI6iHbmpWjdKtDvFNMsiStNoUWwaP1rCeSObWd8XRU/f6Cv6/c/wAQ2nc/Q7ZRN/ZkBTQrsztXCIRVIsVMtIOy6uioo8Kk0EpRTMTMWbpHt5yVenhvtYVMRL3rjKP6avOP45fcxDy73hSerqjEkT7/X9mFesaGWZhqy2vIyusVAaueXcDYKQLdvrEfeTPeW70B9xd4bL0elBY+m7PHf3eOxH3j2/7gIrurwO9CLPu8O4ubhZ1uXdcHKtz8s6SeL2Z1Ifdqm+fCCyXeej7jFP/oNQaOGPTIQIf+kBCwXzJyZCiLFkpVnGBN0SDS2U1rSuFBGjSt8dRrnPity/ONA6eMxQRsOx9S/XmM/rzbaXB26FoWTdJwfXt6tAXWp/9ua7AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgw/kH2iNlm+l+U8MAAAAASUVORK5CYII="
                        class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">이름 : 이강산</h5>
                        <p class="card-text">MBTI : 드롭박스</p>
                        <p class="card-text">이메일</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 추가 수정 삭제 버튼  CSS로 못하겠다...-->
    <div class="memberbtn" style="float: right;">
        <button><img src="https://cdn.icon-icons.com/icons2/2098/PNG/512/edit_icon_128873.png" width="50px"
                title="수정"></button>
        <a href="#wr_popup" class="pop_btn"><button><img
                    src="https://cdn.icon-icons.com/icons2/635/PNG/512/add-button_icon-icons.com_58943.png" width="50px"
                    title="추가"></button></a>
        <button><img src="https://cdn.icon-icons.com/icons2/1337/PNG/512/deletebutton_87299.png" width="50px"
                title="삭제"></button>
    </div>

    <!-- 팝업 포스팅 박스-->
    <div id="wr_popup" class="popup" style="display: none;">
        <div class="wr-card">
            <div class="write-down">
                <label>
                    <h5>image : </h5>
                </label>
                <input type="text" id="image">
            </div>
            <div class="write-down">
                <label>
                    <h5>성 : </h5>
                </label>
                <input type="text" id="surname">
            </div>
            <div class="write-down">
                <label>
                    <h5>이름 : </h5>
                </label>
                <input type="text" id="firstname">
            </div>
            <div class="write-down">
                <label>
                    <h5>MBTI : </h5>
                </label>
                <select class="dropdown" id="mbti">
                    <option selected></option>
                    <option value="ISTJ">ISTJ</option>
                    <option value="ISFJ">ISFJ</option>
                    <option value="INFJ">INFJ</option>
                    <option value="INTJ">INTJ</option>
                    <option value="ISTP">ISTP</option>
                    <option value="ISFP">ISFP</option>
                    <option value="INFP">INFP</option>
                    <option value="INTP">INTP</option>
                    <option value="ESTP">ESTP</option>
                    <option value="ESFP">ESFP</option>
                    <option value="ENFP">ENFP</option>
                    <option value="ENTP">ENTP</option>
                    <option value="ESTJ">ESTJ</option>
                    <option value="ESFJ">ESFJ</option>
                    <option value="ENFJ">ENFJ</option>
                    <option value="ENTJ">ENTJ</option>
                </select>
            </div>
            <div class="write-down">
                <label>
                    <h5>각오 : </h5>
                </label>
                <textarea id="comment"></textarea>
            </div>
            <div class="write-down">
                <label>
                    <h5>이메일 : </h5>
                </label>
                <input type="text" id="email">
            </div>
            <div class="write-down">
                <label>
                    <h5>블로그 : </h5>
                </label>
                <input type="text" id="blog">
            </div>
            <div class="etcbtn" style="float: right;">
                <button id="postingbtn"><img
                        src="https://cdn.icon-icons.com/icons2/635/PNG/512/add-button_icon-icons.com_58943.png"
                        width="50px" title="등록"></button>
                <button class="cancel_btn"><img
                        src="https://cdn.icon-icons.com/icons2/1337/PNG/512/deletebutton_87299.png" width="50px"
                        title="취소"></button>
            </div>
        </div>
    </div>
</body>

</html>